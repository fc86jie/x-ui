!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):"object"==typeof exports?exports.XUI=t(require("vue")):e.XUI=t(e.vue)}(self,(function(e){return function(){"use strict";var t={580:function(e,t){t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[e,o]of t)n[e]=o;return n}},13:function(e,t,n){n.d(t,{Aside:function(){return s}});var o=n(748);const r={class:"x-aside"};var l={name:"XAside"},a=(0,n(580).Z)(l,[["render",function(e,t,n,l,a,s){return(0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.renderSlot)(e.$slots,"default")])}]]);a.install=e=>{e.component(a.name,a)};const s=a},371:function(e,t,n){n.d(t,{Button:function(){return a}});var o=n(748);const r={name:"XButton"};var l=Object.assign(r,{props:{type:{required:!1,type:String,default:"default"},size:{required:!1,type:String,default:"default"}},setup(e){const t=e,n=(0,o.computed)((()=>`x-button--${t.type}`)),r=(0,o.computed)((()=>`x-button-${t.size}`));return(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("button",{class:(0,o.normalizeClass)(["x-button",[(0,o.unref)(n),(0,o.unref)(r)]])},[(0,o.renderSlot)(e.$slots,"default")],2))}});l.install=e=>{e.component(l.name,l)};const a=l},191:function(e,t,n){n.d(t,{Container:function(){return s}});var o=n(748);const r={class:"x-container"};var l={name:"XContainer"},a=(0,n(580).Z)(l,[["render",function(e,t,n,l,a,s){return(0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.renderSlot)(e.$slots,"default")])}]]);a.install=e=>{e.component(a.name,a)};const s=a},148:function(e,t,n){n.d(t,{Header:function(){return s}});var o=n(748);const r={class:"x-header"};var l={name:"XHeader"},a=(0,n(580).Z)(l,[["render",function(e,t,n,l,a,s){return(0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.renderSlot)(e.$slots,"default")])}]]);a.install=e=>{e.component(a.name,a)};const s=a},167:function(e,t,n){n.d(t,{Main:function(){return s}});var o=n(748);const r={class:"x-main"};var l={name:"XMain"},a=(0,n(580).Z)(l,[["render",function(e,t,n,l,a,s){return(0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.renderSlot)(e.$slots,"default")])}]]);a.install=e=>{e.component(a.name,a)};const s=a},434:function(e,t,n){n.d(t,{TimeSelection:function(){return B}});var o=n(748);const r={class:"x-calendar",ref:"calendarRef"},l={class:"x-schedule",ref:"scheduleRef"},a={class:"x-calendar-table"},s={class:"x-calendar-head"},c=(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("th",{rowspan:"8",class:"week-td"},"星期/时间"),(0,o.createElementVNode)("th",{colspan:"24"},"00:00 - 12:00"),(0,o.createElementVNode)("th",{colspan:"24"},"12:00 - 24:00")],-1),i=["textContent"],u={class:"x-calendar-body"},d=["textContent"],p=["data-week","data-time","onMousedown"],m={colspan:"49"},f={class:"pull-left"},v={key:0,class:"td-selected-time"},h={class:"item-text"},y={class:"x-calendar-popover"},k={ref:"popoverRef",class:"x-calendar-popover-wrapper"},g=(0,o.createElementVNode)("div",{class:"x-calendar-popover-arrow"},null,-1),x={class:"x-calendar-popover-panel"},E=["textContent"],b=(e,t)=>{let n=e.className,o=""!=n?" ":"";e.className=`${n}${o}${t}`},S=(e,t)=>{let n=" "+e.className+" ";n=n.replace(/(\s+)/gi," ");let o=n.replace(" "+t+" "," ");o=o.replace(/(^\s+)|(\s+$)/g,""),e.className=o};var w=(0,o.defineComponent)({name:"XTimeSelection",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(e,t){const n=Array.from({length:24},((e,t)=>t)),r=Array.from({length:48},((e,t)=>t)),l=["一","二","三","四","五","六","日"].map((e=>`星期${e}`)),a={...l};let s="",c=null,i={x:"",y:""},u=0,d=!1,p=null,m=!1;const f=(0,o.reactive)({hoverWeek:"",hoverTime:"",isPopover:!1,selectedTimeList:[]}),v=e=>{let t=[];return JSON.parse(JSON.stringify(e)).forEach(((e,n)=>{let o=(e=e.sort(((e,t)=>e-t))).reduce(((e,t)=>(e.length&&t-e[0][0]==1?e[0].unshift(t):e.unshift([t]),e)),[]).reverse().map((e=>e.reverse())),r=[];o.forEach((e=>{r.push(e[0]/2+"-"+(e[e.length-1]+1)/2)})),t[n]=r.join(",")})),E(t),"||||||"===t.join("|")?"":t.join("|")},h=(e,t)=>{let n=e.getBoundingClientRect();return{x:n.left+(t?n.width:0),y:n.top+(t?n.height:0)}},y=()=>{i&&(i=null,c=p,S(N.value,"no-transition"),k(s,c))},k=(e,t)=>{if(e&&t){let n=N.value,o=parseInt(e.getAttribute("data-week")),r=parseInt(e.getAttribute("data-time")),l=parseInt(t.getAttribute("data-week")),a=parseInt(t.getAttribute("data-time")),s=Math.min(o,l),c=Math.max(o,l),i=Math.min(r,a),u=Math.max(r,a);n.style.opacity=0,setTimeout((()=>{n.style.display="none"}),500),g(i,s,u,c)}},g=(e,n,o,r)=>{w.value.querySelectorAll(".calendar-atom-time").forEach((t=>{let l=parseInt(t.getAttribute("data-time")),a=parseInt(t.getAttribute("data-week")),s=V.value[a].indexOf(l);l>=e&&l<=o&&a>=n&&a<=r&&(void 0===V.value[a]&&(V.value[a]=[],V.value[a].push(l)),V.value[a]&&(m?-1===s&&(V.value[a].push(l),b(t,"ui-selected")):s>-1&&(V.value[a].splice(s,1),S(t,"ui-selected"))))})),t.emit("update:modelValue",v(V.value))},x=()=>{w.value.querySelectorAll(".calendar-atom-time").forEach((e=>{S(e,"ui-selected")})),V.value.forEach(((e,t)=>{let n=w.value.querySelectorAll("tr")[t+2];e.forEach((e=>{n.querySelectorAll("td")[e+1].className="calendar-atom-time ui-selected"}))}))},E=e=>{f.selectedTimeList=[],e.forEach(((e,t)=>{if(e){let n={week:"",time:""};n.week=a[t];let o=[];e.split(",").forEach((e=>{let t=e.split("-"),n=l(t[0]),r=l(t[1]);function l(e){return e.indexOf(".")>-1?`${parseInt(e.padStart(2,"0"))}:30`:`${e.padStart(2,"0")}:00`}o.push(n+"~"+r)})),n.time=o.join(","),f.selectedTimeList.push(n)}}))},w=(0,o.ref)(),N=(0,o.ref)(),B=(0,o.ref)();let V=(0,o.computed)({get:()=>(e=>{let t=[],n=(e||"||||||").split("|");return E(n),n.forEach(((e,n)=>{t[n]=[],e.split(",").forEach((e=>{let o=e.split("-");for(let e=2*o[0];e<2*o[1];e++)t[n].push(e)}))})),t})(e.modelValue),set:e=>{t.emit("update:modelValue",v(e))}});return(0,o.watch)((()=>V.value),(()=>{x()})),(0,o.onMounted)((()=>{x();let e=w.value;e.addEventListener("mousedown",(e=>{if("calendar-atom-time",e.target.className.split(/\s+/).includes("calendar-atom-time")&&1===e.which&&(s=e.target)){i=h(e.target,!1);let t=N.value;t.style.width=0,t.style.height=0,t.style.left=`${i.x}px`,t.style.top=`${i.y}px`,t.style.opacity=.6,t.style.display="block",b(t,"no-transition")}})),e.addEventListener("mousemove",(e=>{p=document.elementFromPoint(e.clientX,e.clientY);let t=h(p,!0);if(i){let e=t.x-i.x,n=t.y-i.y,o=n>0?i.y:t.y-20,r=e>0?i.x:t.x-10,l=e>0?Math.abs(e):Math.abs(e)+22,a=n>0?Math.abs(n):Math.abs(n)+42,s=N.value;s.style.width=`${l}px`,s.style.height=`${a}px`,s.style.top=`${o}px`,s.style.left=`${r}px`}})),e.addEventListener("mouseup",(()=>{y()})),e.addEventListener("mousewheel",(()=>{y()})),e.addEventListener("mouseleave",(()=>{y()}))})),{dayHour:n,dayHalfHour:r,weekName:l,...(0,o.toRefs)(f),calendarRef:w,scheduleRef:N,popoverRef:B,onMousedown:(e,t)=>{((e,t)=>{let n=V.value[e];m=!n||-1===n.indexOf(t)})(e,t)},onMouseenter:e=>{(e=>{let t=e.target,n=t.getAttribute("data-week"),r=t.getAttribute("data-time");d=!0;let l=Math.floor(r/2).toString().padStart(2,"0"),s=r%2?`${l}:30 - ${(+l+1).toString().padStart(2,"0")}:00`:`${l}:00 - ${l}:30`;u&&clearTimeout(u),u=setTimeout((()=>{f.hoverWeek=a[n],f.hoverTime=s,f.isPopover=!!d,clearTimeout(u),(0,o.nextTick)().then((()=>{(e=>{let t=h(e,!0),n=B.value,o=h(n.parentNode,!0);n.style.transform=`translate3d(${t.x-o.x-n.offsetWidth/2-e.offsetWidth/2}px, ${t.y-o.y-n.offsetHeight-e.offsetHeight}px, 0px)`})(t)}))}),500)})(e)},onMouseleave:e=>{d=!1,f.hoverWeek="",f.hoverTime="",f.isPopover=!1},onResetAllClick:()=>{V.value=[[],[],[],[],[],[],[]],w.value.querySelectorAll(".calendar-atom-time").forEach((e=>{S(e,"ui-selected")}))}}}}),N=(0,n(580).Z)(w,[["render",function(e,t,n,b,S,w){return(0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createCommentVNode)(" 框选范围框 "),(0,o.createElementVNode)("div",l,null,512),(0,o.createCommentVNode)(" 表格显示区 "),(0,o.createElementVNode)("table",a,[(0,o.createElementVNode)("thead",s,[c,(0,o.createElementVNode)("tr",null,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.dayHour,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("td",{key:t,colspan:"2",textContent:(0,o.toDisplayString)(e)},null,8,i)))),128))])]),(0,o.createElementVNode)("tbody",u,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.weekName,((n,r)=>((0,o.openBlock)(),(0,o.createElementBlock)("tr",{key:r},[(0,o.createElementVNode)("td",{textContent:(0,o.toDisplayString)(n)},null,8,d),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.dayHalfHour,((n,l)=>((0,o.openBlock)(),(0,o.createElementBlock)("td",{key:l,"data-week":r,"data-time":n,class:"calendar-atom-time",onMousedown:()=>e.onMousedown(r,n),onMouseenter:t[0]||(t[0]=(...t)=>e.onMouseenter&&e.onMouseenter(...t)),onMouseleave:t[1]||(t[1]=(...t)=>e.onMouseleave&&e.onMouseleave(...t))},null,40,p)))),128))])))),128)),(0,o.createElementVNode)("tr",null,[(0,o.createElementVNode)("td",m,[(0,o.createElementVNode)("div",null,[(0,o.createElementVNode)("span",f,(0,o.toDisplayString)(e.selectedTimeList.length?"已选择时间段":"可拖动鼠标选择时间"),1),(0,o.createElementVNode)("a",{class:"pull-right",onClick:t[2]||(t[2]=(...t)=>e.onResetAllClick&&e.onResetAllClick(...t))},"清空选择")]),e.selectedTimeList.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",v,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.selectedTimeList,((e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)("p",{key:t},[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.week)+"：",1),(0,o.createElementVNode)("span",h,(0,o.toDisplayString)(e.time),1)])))),128))])):(0,o.createCommentVNode)("v-if",!0)])])]),(0,o.createCommentVNode)(" 悬浮提示 "),(0,o.createElementVNode)("div",y,[(0,o.withDirectives)((0,o.createElementVNode)("div",k,[g,(0,o.createElementVNode)("div",x,[(0,o.createElementVNode)("div",{class:"x-calendar-popover-body",textContent:(0,o.toDisplayString)(`${e.hoverWeek} ${e.hoverTime}`)},null,8,E)])],512),[[o.vShow,e.isPopover]])])])],512)}]]);N.install=e=>{e.component(N.name,N)};const B=N},748:function(t){t.exports=e},147:function(e){e.exports=JSON.parse('{"name":"xfc-ui","version":"1.0.1","description":"xfc-ui component library","main":"lib/index.js","files":["lib","src","packages","example"],"scripts":{"dev":"webpack serve --config webpack.dev.js --color --progress --hot","build":"webpack --config webpack.prod.js --color --progress","build:style":"gulp"},"keywords":[],"author":"","license":"ISC","peerDependencies":{"vue":"^3.2.47"},"devDependencies":{"autoprefixer":"^10.4.13","css-loader":"^6.7.3","cssnano":"^5.1.14","gulp":"^4.0.2","gulp-cli":"^2.3.0","gulp-postcss":"^9.0.1","gulp-sass":"^5.1.0","gulp-sass-glob":"^1.1.0","html-webpack-plugin":"^5.5.0","node-sass":"^8.0.0","postcss":"^8.4.21","sass":"^1.58.0","sass-loader":"^13.2.0","style-loader":"^3.3.1","vue":"^3.2.47","vue-loader":"^17.0.1","vue-template-compiler":"^2.7.14","webpack":"^5.75.0","webpack-cli":"^5.0.1","webpack-dev-server":"^4.11.1"}}')}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,o),l.exports}o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return function(){o.r(r),o.d(r,{Aside:function(){return t.Aside},Button:function(){return n.Button},Container:function(){return l.Container},Header:function(){return a.Header},Main:function(){return s.Main},TimeSelection:function(){return c.TimeSelection},default:function(){return d}});var e={};o.r(e),o.d(e,{Aside:function(){return t.Aside},Button:function(){return n.Button},Container:function(){return l.Container},Header:function(){return a.Header},Main:function(){return s.Main},TimeSelection:function(){return c.TimeSelection}});var t=o(13),n=o(371),l=o(191),a=o(148),s=o(167),c=o(434);const{version:i,name:u}=o(147);var d={name:u,version:i,install:t=>{Object.keys(e).forEach((n=>{t.use(e[n])}))},...e}}(),r}()}));
//# sourceMappingURL=index.js.map