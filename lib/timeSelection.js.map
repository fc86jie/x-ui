{"version":3,"file":"timeSelection.js","mappings":"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","sources":["webpack://XUI/webpack/universalModuleDefinition","webpack://XUI/./node_modules/.pnpm/vue-loader@17.0.1_vue@3.2.47+webpack@5.75.0/node_modules/vue-loader/dist/exportHelper.js","webpack://XUI/external umd \"vue\"","webpack://XUI/webpack/bootstrap","webpack://XUI/webpack/runtime/define property getters","webpack://XUI/webpack/runtime/hasOwnProperty shorthand","webpack://XUI/webpack/runtime/make namespace object","webpack://XUI/./packages/timeSelection/TimeSelection.vue","webpack://XUI/./packages/timeSelection/util.js","webpack://XUI/./packages/timeSelection/TimeSelection.vue?a804","webpack://XUI/./packages/timeSelection/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"vue\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"XUI\"] = factory(require(\"vue\"));\n\telse\n\t\troot[\"XUI\"] = factory(root[\"vue\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__748__) {\nreturn ","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__748__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","<!--\r\n * @Author: wangrenjie86@gmail.com\r\n * @Date: 2023-02-25 09:58:40\r\n * @LastEditors: wangrenjie86@gmail.com\r\n * @LastEditTime: 2023-02-25 17:22:09\r\n * @FilePath: \\packages\\timeSelection\\TimeSelection.vue\r\n * @Description: \r\n-->\r\n\r\n<template>\r\n  <div class=\"x-calendar\" ref=\"calendarRef\">\r\n    <!-- 框选范围框 -->\r\n    <div class=\"x-schedule\" ref=\"scheduleRef\"></div>\r\n    <!-- 表格显示区 -->\r\n    <table class=\"x-calendar-table\">\r\n      <thead class=\"x-calendar-head\">\r\n        <tr>\r\n          <th rowspan=\"8\" class=\"week-td\">星期/时间</th>\r\n          <th colspan=\"24\">00:00 - 12:00</th>\r\n          <th colspan=\"24\">12:00 - 24:00</th>\r\n        </tr>\r\n        <tr>\r\n          <td v-for=\"(item, index) in dayHour\" :key=\"index\" colspan=\"2\" v-text=\"item\"></td>\r\n        </tr>\r\n      </thead>\r\n      <tbody class=\"x-calendar-body\">\r\n        <tr v-for=\"(item, index) in weekName\" :key=\"index\">\r\n          <td v-text=\"item\"></td>\r\n          <td\r\n            v-for=\"(week, idx) in dayHalfHour\"\r\n            :key=\"idx\"\r\n            :data-week=\"index\"\r\n            :data-time=\"week\"\r\n            class=\"calendar-atom-time\"\r\n            v-on:mousedown=\"() => onMousedown(index, week)\"\r\n            v-on:mouseenter=\"onMouseenter\"\r\n            v-on:mouseleave=\"onMouseleave\"></td>\r\n        </tr>\r\n        <tr>\r\n          <td colspan=\"49\">\r\n            <div>\r\n              <span class=\"pull-left\">{{ selectedTimeList.length ? '已选择时间段' : '可拖动鼠标选择时间' }}</span>\r\n              <a class=\"pull-right\" @click=\"onResetAllClick\">清空选择</a>\r\n            </div>\r\n            <div v-if=\"selectedTimeList.length\" class=\"td-selected-time\">\r\n              <p v-for=\"(item, index) in selectedTimeList\" :key=\"index\">\r\n                <span>{{ item['week'] }}：</span>\r\n                <span class=\"item-text\">{{ item['time'] }}</span>\r\n              </p>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n      <!-- 悬浮提示 -->\r\n      <div class=\"x-calendar-popover\">\r\n        <div ref=\"popoverRef\" class=\"x-calendar-popover-wrapper\" v-show=\"isPopover\">\r\n          <div class=\"x-calendar-popover-arrow\"></div>\r\n          <div class=\"x-calendar-popover-panel\">\r\n            <div class=\"x-calendar-popover-body\" v-text=\"`${hoverWeek} ${hoverTime}`\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </table>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { defineComponent, nextTick, computed, reactive, ref, watch, onMounted, toRefs } from 'vue';\r\nimport { addClass, removeClass, hasClass } from './util';\r\n\r\nexport default defineComponent({\r\n  name: 'XTimeSelection',\r\n  props: {\r\n    modelValue: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n  },\r\n  emits: ['update:modelValue'],\r\n  setup(props, context) {\r\n    const dayHour = Array.from({ length: 24 }, (v, k) => k);\r\n    const dayHalfHour = Array.from({ length: 48 }, (v, k) => k);\r\n    const weekName = ['一', '二', '三', '四', '五', '六', '日'].map(day => `星期${day}`);\r\n    const weekMap = { ...weekName };\r\n\r\n    let startTd = '',\r\n      endTd = null,\r\n      startPoint = {\r\n        x: '',\r\n        y: '',\r\n      },\r\n      hoverTimeoutId = 0,\r\n      popOverCanShow = false,\r\n      curTd = null,\r\n      isAdd = false;\r\n\r\n    const state = reactive({\r\n      hoverWeek: '',\r\n      hoverTime: '',\r\n      isPopover: false,\r\n      selectedTimeList: [],\r\n    });\r\n\r\n    /**\r\n     * 格式化输入数据\r\n     * '0-0.5,1-2.5,9-10||||||' => [[0,2,3,4,18,19],[],[],[],[],[],[]]\r\n     * @param {*} value\r\n     */\r\n    const formatInputData = value => {\r\n      let data = value || '||||||';\r\n      let weekSchedule = [];\r\n      let weekList = data.split('|');\r\n      setTimeList(weekList);\r\n      weekList.forEach((week, index) => {\r\n        weekSchedule[index] = [];\r\n        // '0-0.5,1-2.5,9-10' => ['0-0.5', '1-2.5', '9-10']\r\n        let hourList = week.split(',');\r\n        hourList.forEach(hour => {\r\n          let hourRanger = hour.split('-');\r\n          // [1,2.5] => [2,3,4,5]\r\n          for (let i = hourRanger[0] * 2; i < hourRanger[1] * 2; i++) {\r\n            weekSchedule[index].push(i);\r\n          }\r\n        });\r\n      });\r\n      return weekSchedule;\r\n    };\r\n\r\n    /**\r\n     * 格式化输出数据\r\n     * [[0,2,3,4,18,19],[],[],[],[],[],[]] => '0-0.5,1-2.5,9-10||||||'\r\n     * @param {*} data\r\n     */\r\n    const formatOutputData = data => {\r\n      let result = [];\r\n      let weekSchedule = JSON.parse(JSON.stringify(data));\r\n      weekSchedule.forEach((week, index) => {\r\n        // 组件生成的是无序的，需要排序\r\n        week = week.sort((a, b) => {\r\n          return a - b;\r\n        });\r\n\r\n        // [0,2,3,4,18,19] => [[0],[2,3,4],[18,19]]\r\n        let timeList = week\r\n          .reduce((timeList, value) => {\r\n            if (timeList.length && value - timeList[0][0] === 1) {\r\n              timeList[0].unshift(value);\r\n            } else {\r\n              timeList.unshift([value]);\r\n            }\r\n            return timeList;\r\n          }, [])\r\n          .reverse()\r\n          .map(v => v.reverse());\r\n        // [[0], [2,3,4], [18,19]] => ['0-0.5', '1-2.5', '9-10']\r\n        let list = [];\r\n        timeList.forEach(time => {\r\n          list.push(time[0] / 2 + '-' + (time[time.length - 1] + 1) / 2);\r\n        });\r\n        result[index] = list.join(',');\r\n      });\r\n      setTimeList(result);\r\n      return result.join('|') === '||||||' ? '' : result.join('|');\r\n    };\r\n\r\n    const setHoverData = evt => {\r\n      let hoverEle = evt.target;\r\n      let HoverDataWeek = hoverEle.getAttribute('data-week');\r\n      let HoverDataTime = hoverEle.getAttribute('data-time');\r\n      popOverCanShow = true;\r\n      let hour = Math.floor(HoverDataTime / 2)\r\n          .toString()\r\n          .padStart(2, '0'),\r\n        hoverTimeText =\r\n          HoverDataTime % 2 ? `${hour}:30 - ${(+hour + 1).toString().padStart(2, '0')}:00` : `${hour}:00 - ${hour}:30`;\r\n      hoverTimeoutId && clearTimeout(hoverTimeoutId);\r\n      hoverTimeoutId = setTimeout(() => {\r\n        state.hoverWeek = weekMap[HoverDataWeek];\r\n        state.hoverTime = hoverTimeText;\r\n        state.isPopover = !!popOverCanShow;\r\n        clearTimeout(hoverTimeoutId);\r\n        nextTick().then(() => {\r\n          setPopoverPos(hoverEle);\r\n        });\r\n      }, 500);\r\n    };\r\n\r\n    const setPopoverPos = ele => {\r\n      let eleRect = getClientPosition(ele, true);\r\n      let popoverEle = popoverRef.value;\r\n      let popoverReact = getClientPosition(popoverEle.parentNode, true);\r\n      popoverEle.style.transform = `translate3d(${\r\n        eleRect.x - popoverReact.x - popoverEle.offsetWidth / 2 - ele.offsetWidth / 2\r\n      }px, ${eleRect.y - popoverReact.y - popoverEle.offsetHeight - ele.offsetHeight}px, 0px)`;\r\n    };\r\n\r\n    const removeHoverData = evt => {\r\n      popOverCanShow = false;\r\n      state.hoverWeek = '';\r\n      state.hoverTime = '';\r\n      state.isPopover = false;\r\n    };\r\n\r\n    const setFirstSource = (weekIndex, timeIndex) => {\r\n      let timeList = week_schedule.value[weekIndex];\r\n      isAdd = !timeList || -1 === timeList.indexOf(timeIndex);\r\n    };\r\n\r\n    const onResetAllClick = () => {\r\n      week_schedule.value = [[], [], [], [], [], [], []];\r\n      let calendarEle = calendarRef.value;\r\n      let calendarAtomTimeEles = calendarEle.querySelectorAll('.calendar-atom-time');\r\n      calendarAtomTimeEles.forEach(item => {\r\n        removeClass(item, 'ui-selected');\r\n      });\r\n    };\r\n\r\n    const getClientPosition = (ele, isAdd) => {\r\n      let rect = ele.getBoundingClientRect();\r\n      return {\r\n        x: rect.left + (isAdd ? rect.width : 0),\r\n        y: rect.top + (isAdd ? rect.height : 0),\r\n      };\r\n    };\r\n\r\n    const scheduleEnd = () => {\r\n      if (startPoint) {\r\n        startPoint = null;\r\n        endTd = curTd;\r\n        removeClass(scheduleRef.value, 'no-transition');\r\n        highlightScheduleArea(startTd, endTd);\r\n      }\r\n    };\r\n\r\n    const highlightScheduleArea = (startTd, endTd) => {\r\n      if (startTd && endTd) {\r\n        let scheduleEle = scheduleRef.value,\r\n          startTdWeek = parseInt(startTd.getAttribute('data-week')),\r\n          startTdTime = parseInt(startTd.getAttribute('data-time')),\r\n          endTdWeek = parseInt(endTd.getAttribute('data-week')),\r\n          endTdTime = parseInt(endTd.getAttribute('data-time')),\r\n          minWeek = Math.min(startTdWeek, endTdWeek),\r\n          maxWeek = Math.max(startTdWeek, endTdWeek),\r\n          minTime = Math.min(startTdTime, endTdTime),\r\n          maxTime = Math.max(startTdTime, endTdTime);\r\n\r\n        scheduleEle.style.opacity = 0;\r\n        setTimeout(() => {\r\n          scheduleEle.style.display = 'none';\r\n        }, 500);\r\n        getSelectedCollection(minTime, minWeek, maxTime, maxWeek);\r\n      }\r\n    };\r\n\r\n    const getSelectedCollection = (minTime, minWeek, maxTime, maxWeek) => {\r\n      let calendarAtomTimeEles = calendarRef.value.querySelectorAll('.calendar-atom-time');\r\n      calendarAtomTimeEles.forEach(item => {\r\n        let time = parseInt(item.getAttribute('data-time')),\r\n          week = parseInt(item.getAttribute('data-week')),\r\n          index = week_schedule.value[week].indexOf(time);\r\n\r\n        if (time >= minTime && time <= maxTime && week >= minWeek && week <= maxWeek) {\r\n          if (week_schedule.value[week] === undefined) {\r\n            week_schedule.value[week] = [];\r\n            week_schedule.value[week].push(time);\r\n          }\r\n\r\n          if (week_schedule.value[week]) {\r\n            if (isAdd) {\r\n              if (index === -1) {\r\n                week_schedule.value[week].push(time);\r\n                addClass(item, 'ui-selected');\r\n              }\r\n            } else {\r\n              if (index > -1) {\r\n                week_schedule.value[week].splice(index, 1);\r\n                removeClass(item, 'ui-selected');\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n      context.emit('update:modelValue', formatOutputData(week_schedule.value));\r\n    };\r\n\r\n    const onMousedown = (weekIndex, timeIndex) => {\r\n      setFirstSource(weekIndex, timeIndex);\r\n    };\r\n\r\n    const onMouseenter = evt => {\r\n      setHoverData(evt);\r\n    };\r\n\r\n    const onMouseleave = evt => {\r\n      removeHoverData(evt);\r\n    };\r\n\r\n    const recoverDisplay = () => {\r\n      // 清空所有选中项\r\n      let calendarAtomTimeEles = calendarRef.value.querySelectorAll('.calendar-atom-time');\r\n      calendarAtomTimeEles.forEach(item => {\r\n        removeClass(item, 'ui-selected');\r\n      });\r\n      // 恢复需要选中的\r\n      week_schedule.value.forEach((week, weekIndex) => {\r\n        let weekEle = calendarRef.value.querySelectorAll('tr')[weekIndex + 2];\r\n        week.forEach(time => {\r\n          let timeEle = weekEle.querySelectorAll('td')[time + 1];\r\n          timeEle.className = 'calendar-atom-time ui-selected';\r\n        });\r\n      });\r\n    };\r\n\r\n    const setTimeList = list => {\r\n      state.selectedTimeList = [];\r\n      // ['0-0.5,3-6', '1-5']\r\n      list.forEach((week, index) => {\r\n        if (week) {\r\n          let oneWeekTime = {\r\n            week: '',\r\n            time: '',\r\n          };\r\n          oneWeekTime.week = weekMap[index];\r\n          let timeList = [];\r\n          let weekArray = week.split(',');\r\n          // ['0-0.5', '3-6']\r\n          weekArray.forEach(week => {\r\n            let timeArray = week.split('-');\r\n            let startText = generateText(timeArray[0]);\r\n            let endText = generateText(timeArray[1]);\r\n            timeList.push(startText + '~' + endText);\r\n            function generateText(time) {\r\n              return time.indexOf('.') > -1 ? `${parseInt(time.padStart(2, '0'))}:30` : `${time.padStart(2, '0')}:00`;\r\n            }\r\n          });\r\n\r\n          oneWeekTime.time = timeList.join(',');\r\n          state.selectedTimeList.push(oneWeekTime);\r\n        }\r\n      });\r\n    };\r\n\r\n    const calendarRef = ref();\r\n    const scheduleRef = ref();\r\n    const popoverRef = ref();\r\n\r\n    let week_schedule = computed({\r\n      get: () => formatInputData(props.modelValue),\r\n      set: value => {\r\n        context.emit('update:modelValue', formatOutputData(value));\r\n      },\r\n    });\r\n\r\n    watch(\r\n      () => week_schedule.value,\r\n      () => {\r\n        // 恢复数据\r\n        recoverDisplay();\r\n      }\r\n    );\r\n\r\n    // 恢复数据\r\n    onMounted(() => {\r\n      recoverDisplay();\r\n      let calendarEle = calendarRef.value;\r\n      calendarEle.addEventListener('mousedown', evt => {\r\n        if (hasClass(evt.target, 'calendar-atom-time') && evt.which === 1 && (startTd = evt.target)) {\r\n          startPoint = getClientPosition(evt.target, false);\r\n          let scheduleEle = scheduleRef.value;\r\n          scheduleEle.style.width = 0;\r\n          scheduleEle.style.height = 0;\r\n          scheduleEle.style.left = `${startPoint.x}px`;\r\n          scheduleEle.style.top = `${startPoint.y}px`;\r\n          scheduleEle.style.opacity = 0.6;\r\n          scheduleEle.style.display = 'block';\r\n          addClass(scheduleEle, 'no-transition');\r\n        }\r\n      });\r\n\r\n      calendarEle.addEventListener('mousemove', evt => {\r\n        curTd = document.elementFromPoint(evt.clientX, evt.clientY);\r\n        let curTdPos = getClientPosition(curTd, true);\r\n        if (startPoint) {\r\n          let diffX = curTdPos.x - startPoint.x,\r\n            diffY = curTdPos.y - startPoint.y,\r\n            top = diffY > 0 ? startPoint.y : curTdPos.y - 20,\r\n            left = diffX > 0 ? startPoint.x : curTdPos.x - 10,\r\n            width = diffX > 0 ? Math.abs(diffX) : Math.abs(diffX) + 22,\r\n            height = diffY > 0 ? Math.abs(diffY) : Math.abs(diffY) + 42;\r\n\r\n          let scheduleEle = scheduleRef.value;\r\n          scheduleEle.style.width = `${width}px`;\r\n          scheduleEle.style.height = `${height}px`;\r\n          scheduleEle.style.top = `${top}px`;\r\n          scheduleEle.style.left = `${left}px`;\r\n        }\r\n      });\r\n\r\n      calendarEle.addEventListener('mouseup', () => {\r\n        scheduleEnd();\r\n      });\r\n\r\n      calendarEle.addEventListener('mousewheel', () => {\r\n        scheduleEnd();\r\n      });\r\n\r\n      calendarEle.addEventListener('mouseleave', () => {\r\n        scheduleEnd();\r\n      });\r\n    });\r\n\r\n    return {\r\n      dayHour,\r\n      dayHalfHour,\r\n      weekName,\r\n      ...toRefs(state),\r\n      calendarRef,\r\n      scheduleRef,\r\n      popoverRef,\r\n      onMousedown,\r\n      onMouseenter,\r\n      onMouseleave,\r\n      onResetAllClick,\r\n    };\r\n  },\r\n});\r\n</script>\r\n","export const addClass = (ele, cls) => {\r\n  let clsName = ele.className,\r\n    blank = clsName != '' ? ' ' : '';\r\n  ele.className = `${clsName}${blank}${cls}`;\r\n};\r\n\r\nexport const removeClass = (ele, cls) => {\r\n  let clsName = ' ' + ele.className + ' ';\r\n  clsName = clsName.replace(/(\\s+)/gi, ' ');\r\n  let removed = clsName.replace(' ' + cls + ' ', ' ');\r\n  removed = removed.replace(/(^\\s+)|(\\s+$)/g, '');\r\n  ele.className = removed;\r\n};\r\n\r\nexport const hasClass = (ele, cls) => {\r\n  let clsNameList = ele.className.split(/\\s+/);\r\n\r\n  return clsNameList.includes(cls) ? true : false;\r\n};\r\n","import { render } from \"./TimeSelection.vue?vue&type=template&id=9dbf69c4\"\nimport script from \"./TimeSelection.vue?vue&type=script&lang=js\"\nexport * from \"./TimeSelection.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\project\\\\xfc-ui\\\\node_modules\\\\.pnpm\\\\vue-loader@17.0.1_vue@3.2.47+webpack@5.75.0\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/**\r\n * @Author: wangrenjie86@gmail.com\r\n * @Date: 2023-02-25 09:58:40\r\n * @LastEditors: wangrenjie86@gmail.com\r\n * @LastEditTime: 2023-02-25 09:58:40\r\n * @FilePath: \\packages\\timeSelection\\index.js\r\n * @Description:\r\n */\r\n\r\nimport XTimeSelection from './TimeSelection.vue';\r\n\r\nXTimeSelection.install = app => {\r\n  app.component(XTimeSelection.name, XTimeSelection);\r\n};\r\n\r\n// 单独导出TimeSelection\r\nexport const TimeSelection = XTimeSelection;\r\n\r\nexport default XTimeSelection;\r\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__748__","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","class","ref","rowspan","colspan","addClass","ele","cls","clsName","className","blank","removeClass","replace","removed","defineComponent","name","modelValue","type","String","default","emits","setup","context","dayHour","Array","from","length","v","k","dayHalfHour","weekName","map","day","weekMap","startTd","endTd","startPoint","x","y","hoverTimeoutId","popOverCanShow","curTd","isAdd","state","reactive","hoverWeek","hoverTime","isPopover","selectedTimeList","formatOutputData","data","result","JSON","parse","stringify","forEach","week","index","timeList","sort","a","b","reduce","unshift","reverse","list","time","push","join","setTimeList","getClientPosition","rect","getBoundingClientRect","left","width","top","height","scheduleEnd","scheduleRef","highlightScheduleArea","scheduleEle","startTdWeek","parseInt","getAttribute","startTdTime","endTdWeek","endTdTime","minWeek","Math","min","maxWeek","max","minTime","maxTime","style","opacity","setTimeout","display","getSelectedCollection","calendarRef","querySelectorAll","item","week_schedule","indexOf","splice","emit","recoverDisplay","weekIndex","weekEle","oneWeekTime","split","timeArray","startText","generateText","endText","padStart","popoverRef","computed","weekSchedule","weekList","hour","hourRanger","i","formatInputData","set","watch","onMounted","calendarEle","addEventListener","evt","includes","which","document","elementFromPoint","clientX","clientY","curTdPos","diffX","diffY","abs","toRefs","onMousedown","timeIndex","setFirstSource","onMouseenter","hoverEle","HoverDataWeek","HoverDataTime","floor","toString","hoverTimeText","clearTimeout","nextTick","then","eleRect","popoverEle","popoverReact","parentNode","transform","offsetWidth","offsetHeight","setPopoverPos","setHoverData","onMouseleave","onResetAllClick","idx","app","component"],"sourceRoot":""}